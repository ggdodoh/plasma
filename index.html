<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>플라즈마 임피던스 시뮬레이터</title>
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
</head>
<body class="bg-gray-50 text-gray-800 font-sans p-6">
  <div class="max-w-5xl mx-auto">
    <!-- 헤더 -->
    <header class="mb-6">
      <h1 class="text-3xl font-bold text-blue-800 mb-2">🔬 플라즈마 임피던스 시뮬레이터 (R, L, C 기반)</h1>
      <p class="text-sm text-gray-600">이 시뮬레이터는 플라즈마의 전기적 임피던스를 R(저항), L(인덕턴스), C(커패시턴스) 요소를 통해 이해할 수 있도록 도와줍니다.</p>
    </header>

    <!-- 상세 이론 설명 -->
    <section class="bg-white p-4 rounded shadow mb-6">
      <h2 class="text-xl font-semibold mb-4">📚 플라즈마 임피던스 이론 요약</h2>
      <p class="mb-2">플라즈마는 고온의 기체 상태에서 전자와 이온으로 분리된 이온화된 물질입니다. 전기적인 특성 때문에 회로 이론에서 RLC 회로로 모델링할 수 있습니다.</p>
      <div class="space-y-3 text-sm">
        <div>
          <h3 class="font-semibold">1. Equivalent Circuit</h3>
          <p>플라즈마는 Bulk 영역(R, L)과 Sheath 영역(C)으로 나뉘며 전체는 다음과 같은 회로로 모델링됩니다:</p>
          <pre class="bg-gray-100 p-2 rounded overflow-x-auto">
Z(ω) = R + jωL - j/(ωC)</pre>
        </div>
        <div>
          <h3 class="font-semibold">2. 유도 성분 (Inductance)</h3>
          <p>전자 질량에 따라 응답 속도가 제한되며, 이는 유도 성분으로 모델링됩니다. 다음과 같이 근사됩니다:</p>
          <pre class="bg-gray-100 p-2 rounded overflow-x-auto">
L_eff ≈ m_e / (n_e * e^2 * A)</pre>
        </div>
        <div>
          <h3 class="font-semibold">3. 커패시턴스 성분 (Capacitance)</h3>
          <p>전극 주변 sheath 영역은 축전기처럼 동작하며 다음과 같이 표현됩니다:</p>
          <pre class="bg-gray-100 p-2 rounded overflow-x-auto">
C_s = ε₀ * A / d</pre>
        </div>
        <div>
          <h3 class="font-semibold">4. 임피던스 전체 모델</h3>
          <p>위 요소들을 종합하면, 플라즈마의 주파수 응답은 다음과 같이 나타납니다:</p>
          <pre class="bg-gray-100 p-2 rounded overflow-x-auto">
Z_total(ω) = R + jωL - j/(ωC)</pre>
        </div>
        <div>
          <h3 class="font-semibold">참고 문헌</h3>
          <ul class="list-disc pl-5 text-blue-700">
            <li><a href="https://www.wiley.com/en-us/Principles+of+Plasma+Discharges+and+Materials+Processing%2C+2nd+Edition-p-9780471720010" target="_blank">Lieberman & Lichtenberg, Principles of Plasma Discharges</a></li>
            <li><a href="https://www.springer.com/gp/book/9783319223092" target="_blank">Chen, Introduction to Plasma Physics</a></li>
          </ul>
        </div>
      </div>
    </section>

    <!-- 입력 폼 -->
    <section class="bg-white p-4 rounded shadow mb-6">
      <h2 class="text-xl font-semibold mb-2">⚙️ 시뮬레이션 파라미터 입력</h2>
      <div class="grid grid-cols-1 sm:grid-cols-3 gap-4">
        <label>저항 R (Ω): <input id="res" type="number" value="5" class="border p-1 w-full"></label>
        <label>인덕턴스 L (H): <input id="ind" type="number" value="1e-6" class="border p-1 w-full"></label>
        <label>커패시턴스 C (F): <input id="cap" type="number" value="1e-9" class="border p-1 w-full"></label>
      </div>
      <button onclick="plotImpedance()" class="mt-4 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700">시뮬레이션</button>
    </section>

    <!-- 그래프 -->
    <section class="bg-white p-4 rounded shadow mb-6">
      <h2 class="text-xl font-semibold mb-2">📊 임피던스 그래프</h2>
      <div id="plot" class="w-full h-96"></div>
      <div class="mt-4 text-sm text-gray-700" id="resonance-info"></div>
    </section>

    <!-- 결과 해석 -->
    <section class="bg-white p-4 rounded shadow mb-6">
      <h2 class="text-xl font-semibold mb-2">🧠 결과 해석</h2>
      <div id="analysis" class="text-sm text-gray-800 space-y-2">
        <p>시뮬레이션 결과를 바탕으로 공진 주파수 및 임피던스의 특성을 분석합니다.</p>
      </div>
    </section>

    <!-- 다운로드 -->
    <section class="bg-white p-4 rounded shadow mb-6">
      <h2 class="text-xl font-semibold mb-2">📥 시뮬레이션 결과 다운로드</h2>
      <button onclick="downloadAsImage()" class="px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700">그래프 PNG 저장</button>
    </section>

    <!-- 풋터 -->
    <footer class="text-center text-sm text-gray-500 mt-10">
      Powered by GPT &middot; HTML 기반 플라즈마 학습용 도구
    </footer>
  </div>

  <script>
    function plotImpedance() {
      const R = parseFloat(document.getElementById("res").value);
      const L = parseFloat(document.getElementById("ind").value);
      const C = parseFloat(document.getElementById("cap").value);

      let freq = [], Zmag = [], Zre = [], Zim = [];
      let resonanceFreq = null;
      let minImZ = Infinity, minFreq = null;

      for (let f = 1e5; f <= 1e7; f += 1e5) {
        const omega = 2 * Math.PI * f;
        const XL = omega * L;
        const XC = 1 / (omega * C);
        const ReZ = R;
        const ImZ = XL - XC;
        const MagZ = Math.sqrt(ReZ ** 2 + ImZ ** 2);

        freq.push(f / 1e6);
        Zmag.push(MagZ);
        Zre.push(ReZ);
        Zim.push(ImZ);

        if (Math.abs(ImZ) < Math.abs(minImZ)) {
          minImZ = ImZ;
          minFreq = f / 1e6;
        }

        if (Math.abs(ImZ) < 5 && !resonanceFreq) {
          resonanceFreq = f / 1e6;
        }
      }

      const trace1 = { x: freq, y: Zmag, mode: 'lines', name: '|Z| (임피던스 크기)' };
      const trace2 = { x: freq, y: Zre, mode: 'lines', name: 'Re(Z)' };
      const trace3 = { x: freq, y: Zim, mode: 'lines', name: 'Im(Z)' };

      const layout = {
        title: '주파수(MHz) vs 임피던스',
        xaxis: { title: '주파수 (MHz)' },
        yaxis: { title: '임피던스 (Ω)' }
      };

      Plotly.newPlot('plot', [trace1, trace2, trace3], layout);

      const resDiv = document.getElementById("resonance-info");
      const anaDiv = document.getElementById("analysis");

      if (resonanceFreq) {
        resDiv.innerHTML = `📍 공진 주파수: <b>${resonanceFreq.toFixed(2)} MHz</b> (Im(Z) ≈ 0)`;
        anaDiv.innerHTML = `
          <p>공진점은 ${resonanceFreq.toFixed(2)} MHz 부근으로, 이때 리액턴스 성분 Im(Z)가 0에 가까워지고 전체 임피던스는 거의 저항값 R과 같아집니다.</p>
          <p>이는 플라즈마 회로가 최대 에너지 전달 조건 (resonance)에 도달했음을 의미합니다.</p>
          <p>해당 주파수에서는 전력 손실 없이 에너지가 전달되기 쉬우므로, 실험 설계 시 중요한 기준점입니다.</p>
        `;
      } else {
        resDiv.innerHTML = `⚠️ 그래프 범위 내에서 공진점(Im(Z)=0)을 찾을 수 없습니다.`;
        anaDiv.innerHTML = `<p>주파수 범위를 확장하거나 L, C 값을 조정해 공진 조건을 찾을 수 있습니다.</p>`;
      }
    }

    function downloadAsImage() {
      Plotly.downloadImage(document.getElementById('plot'), {format: 'png', filename: 'plasma_impedance_plot'});
    }

    window.onload = plotImpedance;
  </script>
</body>
</html>

